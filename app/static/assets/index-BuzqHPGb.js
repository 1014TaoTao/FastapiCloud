const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/auth-JDWZu_by.js","assets/elementPlus-B0Uo40rQ.js","assets/rolldown-runtime-DGruFWvd.js","assets/elementPlus-DprSwW4-.css","assets/axios-Ds9zzBra.js","assets/vue-D2oYtO8u.js","assets/auth-wVvF8KcI.css","assets/user-Cviu01P8.js","assets/user-r7TGKmcd.css","assets/add-BKcilvbx.js","assets/add-CJ8K3QX1.css","assets/edit-Y2LjMtHh.js","assets/edit-GBl3oSLW.css","assets/detail-Dnwi4V6M.js","assets/detail-Dl_6A0jy.css"])))=>i.map(i=>d[i]);
import{r as e}from"./rolldown-runtime-DGruFWvd.js";import{O as t,S as n,T as r,_ as i,a,c as o,d as s,f as c,i as l,l as u,o as d,r as f,s as p,t as m,u as h,y as g}from"./elementPlus-B0Uo40rQ.js";import{i as _,n as v,t as y}from"./vue-D2oYtO8u.js";import{t as b}from"./axios-Ds9zzBra.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var x=`/assets/fastapi-logo-CWeLYVWQ.svg`,S={class:`app-container`},C={class:`app-header`},w={class:`header-right`},T={class:`app-main`},E=c({__name:`App`,setup(e){let c=_(),l=r(!!localStorage.getItem(`token`)),d=()=>{c.push(`/login`)},m=()=>{localStorage.removeItem(`token`),l.value=!1,f.success(`注销成功`),c.push(`/`)};return(e,r)=>{let f=g(`el-button`),_=g(`router-view`);return i(),u(`div`,S,[p(`header`,C,[r[4]||=p(`div`,{class:`header-left`},[p(`div`,{class:`logo-container`},[p(`img`,{src:`/assets/fastapi-logo-CWeLYVWQ.svg`,alt:`FastAPI Logo`,class:`app-logo`})]),p(`h1`,null,`用户管理系统`)],-1),p(`div`,w,[l.value?(i(),u(a,{key:0},[s(f,{type:`primary`,onClick:r[0]||=e=>t(c).push(`/users`)},{default:n(()=>[...r[1]||=[h(`用户管理`,-1)]]),_:1}),s(f,{onClick:m},{default:n(()=>[...r[2]||=[h(`注销`,-1)]]),_:1})],64)):(i(),o(f,{key:1,type:`primary`,onClick:d},{default:n(()=>[...r[3]||=[h(`登录`,-1)]]),_:1}))])]),p(`main`,T,[s(_)])])}}}),D=(e,t)=>{let n=e.__vccOpts||e;for(let[e,r]of t)n[e]=r;return n},O=D(E,[[`__scopeId`,`data-v-f0dcbb47`]]),k=`data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20aria-hidden='true'%20role='img'%20class='iconify%20iconify--logos'%20width='37.07'%20height='36'%20preserveAspectRatio='xMidYMid%20meet'%20viewBox='0%200%20256%20198'%3e%3cpath%20fill='%2341B883'%20d='M204.8%200H256L128%20220.8L0%200h97.92L128%2051.2L157.44%200h47.36Z'%3e%3c/path%3e%3cpath%20fill='%2341B883'%20d='m0%200l128%20220.8L256%200h-51.2L128%20132.48L50.56%200H0Z'%3e%3c/path%3e%3cpath%20fill='%2335495E'%20d='M50.56%200L128%20133.12L204.8%200h-47.36L128%2051.2L97.92%200H50.56Z'%3e%3c/path%3e%3c/svg%3e`,A=b.create({baseURL:`http://localhost:8000`,timeout:1e4,headers:{"Content-Type":`application/json`}});A.interceptors.request.use(e=>{let t=localStorage.getItem(`token`);return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),A.interceptors.response.use(e=>e.data,e=>(e.response?console.error(`API Error:`,e.response.data):e.request?console.error(`Network Error:`,e.request):console.error(`Request Error:`,e.message),Promise.reject(e)));var j={get:(e,t)=>A.get(e,t),post:(e,t,n)=>A.post(e,t,n),put:(e,t,n)=>A.put(e,t,n),delete:(e,t)=>A.delete(e,t)};const M=async e=>{try{let t=await j.post(`/login`,new URLSearchParams({username:e.username,password:e.password}),{headers:{"Content-Type":`application/x-www-form-urlencoded`}});return t.data&&t.data.access_token&&localStorage.setItem(`token`,t.data.access_token),t}catch(e){throw console.error(`Login failed:`,e),e}},N=async e=>{try{return await j.get(`/users`,{params:e})}catch(e){throw console.error(`Get user list failed:`,e),e}},P=async e=>{try{return await j.post(`/user`,e)}catch(e){throw console.error(`Create user failed:`,e),e}},F=async e=>{try{return await j.get(`/user/${e}`)}catch(e){throw console.error(`Get user detail failed:`,e),e}},I=async(e,t)=>{try{return await j.put(`/user/${e}`,t)}catch(e){throw console.error(`Update user failed:`,e),e}},L=async e=>{try{return await j.delete(`/user/${e}`)}catch(e){throw console.error(`Delete user failed:`,e),e}},R=()=>localStorage.getItem(`token`)!==null;var z={class:`home-container`},B={class:`home-content`},V={class:`home-actions`},H=D(c({__name:`index`,setup(e){let r=_(),a=d(()=>R());return(e,s)=>{let c=g(`el-button`);return i(),u(`div`,z,[s[6]||=p(`div`,{class:`background-decoration`},[p(`img`,{src:`data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20aria-hidden='true'%20role='img'%20class='iconify%20iconify--logos'%20width='37.07'%20height='36'%20preserveAspectRatio='xMidYMid%20meet'%20viewBox='0%200%20256%20198'%3e%3cpath%20fill='%2341B883'%20d='M204.8%200H256L128%20220.8L0%200h97.92L128%2051.2L157.44%200h47.36Z'%3e%3c/path%3e%3cpath%20fill='%2341B883'%20d='m0%200l128%20220.8L256%200h-51.2L128%20132.48L50.56%200H0Z'%3e%3c/path%3e%3cpath%20fill='%2335495E'%20d='M50.56%200L128%20133.12L204.8%200h-47.36L128%2051.2L97.92%200H50.56Z'%3e%3c/path%3e%3c/svg%3e`,alt:`Vue Logo`,class:`decoration-icon vue-icon`}),p(`img`,{src:`/assets/fastapi-logo-CWeLYVWQ.svg`,alt:`FastAPI Logo`,class:`decoration-icon fastapi-icon`})],-1),p(`div`,B,[s[4]||=p(`div`,{class:`logo-banner`},[p(`img`,{src:`/assets/fastapi-logo-CWeLYVWQ.svg`,alt:`FastAPI Logo`,class:`banner-logo`}),p(`h1`,null,`欢迎使用用户管理系统`)],-1),s[5]||=p(`p`,{class:`home-description`},` 这是一个基于 Vue 3 + TypeScript + Element Plus 开发的用户管理系统， 提供用户的创建、查询、编辑和删除功能。 `,-1),p(`div`,V,[a.value?(i(),o(c,{key:0,type:`primary`,onClick:s[0]||=e=>t(r).push(`/users`),size:`large`},{default:n(()=>[...s[2]||=[h(` 进入用户管理 `,-1)]]),_:1})):(i(),o(c,{key:1,type:`primary`,onClick:s[1]||=e=>t(r).push(`/login`),size:`large`},{default:n(()=>[...s[3]||=[h(` 请先登录 `,-1)]]),_:1}))])])])}}}),[[`__scopeId`,`data-v-9e1a3a0e`]]),U=`modulepreload`,W=function(e){return`/`+e},G={};const K=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=W(t,n),t in G)return;G[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:U,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[])e.status===`rejected`&&i(e.reason);return e().catch(i)})};var q=[{path:`/`,name:`home`,component:H},{path:`/login`,name:`login`,component:()=>K(()=>import(`./auth-JDWZu_by.js`),__vite__mapDeps([0,1,2,3,4,5,6])),meta:{requiresAuth:!1}},{path:`/users`,name:`users`,component:()=>K(()=>import(`./user-Cviu01P8.js`),__vite__mapDeps([7,1,2,3,4,5,8])),meta:{requiresAuth:!0}},{path:`/users/create`,name:`createUser`,component:()=>K(()=>import(`./add-BKcilvbx.js`),__vite__mapDeps([9,1,2,3,4,5,10])),meta:{requiresAuth:!0}},{path:`/users/:id/edit`,name:`editUser`,component:()=>K(()=>import(`./edit-Y2LjMtHh.js`),__vite__mapDeps([11,1,2,3,4,5,12])),meta:{requiresAuth:!0}},{path:`/users/:id`,name:`userDetail`,component:()=>K(()=>import(`./detail-Dnwi4V6M.js`),__vite__mapDeps([13,1,2,3,4,5,14])),meta:{requiresAuth:!0}}],J=y({history:v(`/`),routes:q});J.beforeEach((e,t,n)=>{let r=!!localStorage.getItem(`token`);e.meta.requiresAuth&&!r?n({name:`login`}):e.path===`/login`&&r?n({name:`home`}):n()});var Y=J,X=l(O);X.use(m),X.use(Y),X.mount(`#app`);export{M as a,D as c,N as i,x as l,L as n,I as o,F as r,k as s,P as t};