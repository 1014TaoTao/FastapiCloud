import{r as e}from"./rolldown-runtime-DGruFWvd.js";import{C as t,S as n,T as r,_ as i,b as a,c as o,d as s,f as c,g as l,l as u,n as d,r as f,s as p,u as m,x as h,y as g}from"./elementPlus-B0Uo40rQ.js";import{i as _}from"./vue-D2oYtO8u.js";import"./axios-Ds9zzBra.js";import{c as v,i as y,l as b,n as x}from"./index-BuzqHPGb.js";var S={class:`search-bar`},C={class:`search-form`},w=v(c({__name:`search`,props:{modelValue:{}},emits:[`update:modelValue`,`search`,`reset`],setup(e,{emit:t}){let a=e,o=t,c=r({...a.modelValue});h(()=>a.modelValue,e=>{c.value={...e}},{deep:!0});let l=()=>{o(`search`)},d=()=>{c.value={page:1,size:10},o(`update:modelValue`,c.value),o(`reset`)};return(e,t)=>{let r=g(`el-input`),a=g(`el-button`);return i(),u(`div`,S,[p(`div`,C,[s(r,{modelValue:c.value.username,"onUpdate:modelValue":t[0]||=e=>c.value.username=e,placeholder:`用户名`,style:{width:`200px`,"margin-right":`10px`},onChange:t[1]||=e=>o(`update:modelValue`,c.value)},null,8,[`modelValue`]),s(r,{modelValue:c.value.name,"onUpdate:modelValue":t[2]||=e=>c.value.name=e,placeholder:`姓名`,style:{width:`200px`,"margin-right":`10px`},onChange:t[3]||=e=>o(`update:modelValue`,c.value)},null,8,[`modelValue`]),s(a,{type:`primary`,onClick:l},{default:n(()=>[...t[4]||=[m(`搜索`,-1)]]),_:1}),s(a,{onClick:d},{default:n(()=>[...t[5]||=[m(`重置`,-1)]]),_:1})])])}}}),[[`__scopeId`,`data-v-b0457c5d`]]),T={class:`user-list-container`},E={class:`search-bar-container`},D={class:`action-bar`},O={class:`pagination`},k=v(c({__name:`index`,setup(e){let c=_(),h=r([]),v=r(!1),b=r(0),S=r(1),C=r(10),k=r({page:S.value,size:C.value}),A=async()=>{v.value=!0;try{k.value.page=S.value,k.value.size=C.value;let e=await y(k.value);h.value=e.data.items,b.value=e.data.total}catch(e){f.error(`加载用户列表失败`),console.error(`Load users error:`,e)}finally{v.value=!1}},j=(e,t)=>{S.value=e,C.value=t,A()},M=()=>{S.value=1,A()},N=()=>{S.value=1,A()},P=()=>{c.push(`/users/create`)},F=e=>{c.push(`/users/${e.id}/edit`)},I=e=>{c.push(`/users/${e.id}`)},L=async e=>{try{await d.confirm(`确定要删除用户 ${e.username} 吗？`,`确认删除`,{confirmButtonText:`确定`,cancelButtonText:`取消`,type:`warning`}),await x(e.id),f.success(`删除成功`),A()}catch(e){e!==`cancel`&&(f.error(`删除失败`),console.error(`Delete user error:`,e))}};return l(()=>{A()}),(e,r)=>{let c=g(`el-button`),l=g(`el-table-column`),d=g(`el-tag`),f=g(`el-table`),_=g(`el-pagination`),y=a(`loading`);return i(),u(`div`,T,[r[9]||=p(`div`,{class:`page-header`},[p(`img`,{src:`/assets/fastapi-logo-CWeLYVWQ.svg`,alt:`FastAPI Logo`,class:`header-logo`}),p(`h2`,{class:`page-title`},`用户列表`)],-1),p(`div`,E,[s(w,{modelValue:k.value,"onUpdate:modelValue":r[0]||=e=>k.value=e,onSearch:M,onReset:N},null,8,[`modelValue`]),p(`div`,D,[s(c,{type:`primary`,onClick:P},{default:n(()=>[...r[3]||=[m(`创建用户`,-1)]]),_:1})])]),t((i(),o(f,{data:h.value,stripe:``,border:``,style:{width:`100%`}},{default:n(()=>[s(l,{prop:`id`,label:`ID`,width:`80`}),s(l,{prop:`username`,label:`用户名`}),s(l,{prop:`name`,label:`昵称`}),s(l,{prop:`status`,label:`状态`,width:`120`},{default:n(e=>[e.row.status?(i(),o(d,{key:0,type:`success`},{default:n(()=>[...r[4]||=[m(` ✅ 激活 `,-1)]]),_:1})):(i(),o(d,{key:1,type:`danger`},{default:n(()=>[...r[5]||=[m(` ❌ 未激活 `,-1)]]),_:1}))]),_:1}),s(l,{prop:`created_time`,label:`创建时间`,width:`180`}),s(l,{prop:`updated_time`,label:`更新时间`,width:`180`}),s(l,{label:`操作`,width:`240`},{default:n(e=>[s(c,{size:`small`,onClick:t=>I(e.row)},{default:n(()=>[...r[6]||=[m(`详情`,-1)]]),_:1},8,[`onClick`]),s(c,{type:`primary`,size:`small`,onClick:t=>F(e.row)},{default:n(()=>[...r[7]||=[m(`编辑`,-1)]]),_:1},8,[`onClick`]),s(c,{type:`danger`,size:`small`,onClick:t=>L(e.row)},{default:n(()=>[...r[8]||=[m(`删除`,-1)]]),_:1},8,[`onClick`])]),_:1})]),_:1},8,[`data`])),[[y,v.value]]),p(`div`,O,[s(_,{"current-page":S.value,"onUpdate:currentPage":r[1]||=e=>S.value=e,"page-size":C.value,"onUpdate:pageSize":r[2]||=e=>C.value=e,"page-sizes":[5,10,20,50],layout:`total, sizes, prev, pager, next, jumper`,total:b.value,onSizeChange:j,onCurrentChange:j},null,8,[`current-page`,`page-size`,`total`])])])}}}),[[`__scopeId`,`data-v-2c7f2872`]]);export{k as default};