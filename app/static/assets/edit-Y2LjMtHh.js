import{r as e}from"./rolldown-runtime-DGruFWvd.js";import{C as t,S as n,T as r,_ as i,b as a,c as o,d as s,f as c,g as l,l as u,o as d,r as f,s as p,u as m,w as h,y as g}from"./elementPlus-B0Uo40rQ.js";import{i as _,r as v}from"./vue-D2oYtO8u.js";import"./axios-Ds9zzBra.js";import{c as y,o as b,r as x}from"./index-BuzqHPGb.js";var S={class:`user-form-container`},C=y(c({__name:`edit`,setup(e){let c=_(),y=v(),C=d(()=>y.params.id),w=h({username:``,name:``,status:!0,description:``,password:``}),T=r(!1),E=r(!1),D=async()=>{E.value=!0;try{let e=(await x(Number(C.value))).data;w.username=e.username,w.name=e.name,w.status=e.status,w.description=e.description||``}catch(e){f.error(`加载用户数据失败`),console.error(`Load user error:`,e),c.push(`/users`)}finally{E.value=!1}},O=()=>w.username?w.name?!0:(f.warning(`请输入昵称`),!1):(f.warning(`请输入用户名`),!1),k=async()=>{if(O()){T.value=!0;try{await b(Number(C.value),w),f.success(`用户更新成功`),c.push(`/users`)}catch(e){f.error(`更新用户失败`),console.error(`Update user error:`,e)}finally{T.value=!1}}},A=()=>{c.push(`/users`)};return l(()=>{D()}),(e,r)=>{let c=g(`el-input`),l=g(`el-form-item`),d=g(`el-switch`),f=g(`el-button`),h=g(`el-form`),_=a(`loading`);return i(),u(`div`,S,[r[7]||=p(`h2`,{class:`page-title`},`编辑用户`,-1),t((i(),o(h,{model:w,"label-width":`100px`,class:`user-form`},{default:n(()=>[s(l,{label:`用户名`},{default:n(()=>[s(c,{modelValue:w.username,"onUpdate:modelValue":r[0]||=e=>w.username=e,placeholder:`请输入用户名`},null,8,[`modelValue`])]),_:1}),s(l,{label:`昵称`},{default:n(()=>[s(c,{modelValue:w.name,"onUpdate:modelValue":r[1]||=e=>w.name=e,placeholder:`请输入昵称`},null,8,[`modelValue`])]),_:1}),s(l,{label:`密码`},{default:n(()=>[s(c,{modelValue:w.password,"onUpdate:modelValue":r[2]||=e=>w.password=e,type:`password`,placeholder:`请输入密码（不修改请留空）`},null,8,[`modelValue`])]),_:1}),s(l,{label:`是否激活`},{default:n(()=>[s(d,{modelValue:w.status,"onUpdate:modelValue":r[3]||=e=>w.status=e},null,8,[`modelValue`])]),_:1}),s(l,{label:`备注`},{default:n(()=>[s(c,{modelValue:w.description,"onUpdate:modelValue":r[4]||=e=>w.description=e,type:`textarea`,placeholder:`请输入备注`,rows:`3`},null,8,[`modelValue`])]),_:1}),s(l,null,{default:n(()=>[s(f,{type:`primary`,onClick:k,loading:T.value},{default:n(()=>[...r[5]||=[m(` 更新 `,-1)]]),_:1},8,[`loading`]),s(f,{onClick:A},{default:n(()=>[...r[6]||=[m(`取消`,-1)]]),_:1})]),_:1})]),_:1},8,[`model`])),[[_,E.value]])])}}}),[[`__scopeId`,`data-v-7008d743`]]);export{C as default};